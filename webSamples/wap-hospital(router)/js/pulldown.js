function getDom(a,b){b=b||document;var c=b.querySelector(a);return c}const scrollCls='scroller',pullDownCls='pullDown',pullDownLabelCls='pullDownLabel',pullUpCls='pullUp',pullUpLabelCls='pullUpLabel',lableUp={initial:'\u4E0A\u62C9\u52A0\u8F7D\u66F4\u591A',suspend:'\u677E\u5F00\u52A0\u8F7D\u66F4\u591A',loading:'\u52A0\u8F7D\u4E2D...',complete:'\u52A0\u8F7D\u5B8C\u6210'};function PullToRefresh(a){var b,c=this;return c.options=a,b=getDom(a.el),c.parent=b,this.init(),this.bindEvents(),void(c.noMore=false)}PullToRefresh.prototype={init:function(){var a=this,b=this.options,c=this.parent;a.scrollObj=getDom('.'+scrollCls,c),b.down&&(a.pullDownEl=document.createElement('div'),a.pullDownEl.className='pullDown',a.pullDownEl.innerHTML='<svg class="icon-symbol icon-jiazaizhong"><use xlink:href="css/svg/symbol-defs0.svg#icon-jiazaizhong"></use></svg><span class="loading-rotate"></span><span class="'+pullDownLabelCls+'">\u80B2\u513F\u5927\u5E08\u3000\u8BA9\u80B2\u513F\u66F4\u7B80\u5355</span>',a.scrollObj.insertBefore(a.pullDownEl,a.scrollObj.firstChild),a.pullDownLabel=getDom('.'+pullDownLabelCls,c)),b.up&&(a.pullUpEl=document.createElement('div'),a.pullUpEl.className='pullUp',a.pullUpEl.innerHTML='<svg class="icon-symbol icon-jiazaizhong"><use xlink:href="css/svg/symbol-defs0.svg#icon-jiazaizhong"></use></svg><span class="loading-rotate"></span><span class="'+pullUpLabelCls+'">\u4E0A\u62C9\u52A0\u8F7D\u66F4\u591A</span>',a.scrollObj.appendChild(a.pullUpEl),a.pullUpLabel=getDom('.'+pullUpLabelCls,c),a.pullUpLabel.innerHTML=lableUp.initial)},bindEvents:function(){var a=this,b=a.scrollObj;b.addEventListener('touchstart',function(c){a.touchstart(c)}),b.addEventListener('touchmove',function(c){a.touchmove(c)}),b.addEventListener('touchend',function(c){a.touchend(c)})},touchstart:function(a){var b=this,c=a.touches[0],d=b.scrollObj;b.pullFlag=0,b.options.down&&(b.pullDownEl.style.webkitTransitionDuration='0s',b.pullDownEl.style.transitionDuration='0s',b.pullDownEl.setAttribute('class',pullDownCls)),b.options.up&&(b.pullUpEl.style.webkitTransitionDuration='0s',b.pullUpEl.style.transitionDuration='0s'),b.startY=c.screenY,b.startPageY=d.scrollTop,b.maxY=d.scrollHeight-d.clientHeight},touchmove:function(a){var b=this,c=this.options.pulldownLength||55,d=this.options.pullupOffset||50,e,f;f=a.touches[0],e=(f.screenY-b.startY)/2,b.options.down&&0==b.startPageY&&0<e?(a.preventDefault(),e>c&&(e=c,b.pullDownEl.setAttribute('class','pullDown flip'),b.pullFlag=1),b.pullDownEl.style.height=e+'px'):b.options.up&&b.startPageY>=b.maxY-d&&0>e&&!b.noMore&&(a.preventDefault(),b.pullFlag=2,b.pullUpEl.setAttribute('class','pullUp flip'),b.pullUpLabel.innerHTML=lableUp.suspend)},touchend:function(){var b=this;if(b.options.down&&1==b.pullFlag)b.pullDownEl.className='pullDown loading',b.options.addNew().then(function(c){b.pullDownEl.style.webkitTransitionDuration='0.5s',b.pullDownEl.style.transitionDuration='0.5s',b.pullDownEl.style.height=0,b.pullDownEl.className='pullDown ok',b.options.up&&b.resetload(c)});else if(b.options.up&&2==b.pullFlag){if(b.noMore)return;b.pullUpEl.setAttribute('class','pullUp loading'),b.pullUpLabel.innerHTML=lableUp.loading,b.options.addMore().then(function(){b.pullUpEl.className='pullUp',b.pullUpLabel.textContent=lableUp.initial},function(){b.noMore=true,b.pullUpEl.className='pullUp',b.pullUpLabel.innerHTML=lableUp.complete,setTimeout(function(){b.pullUpEl.classList.add('hidden')},2e3)})}else b.options.down&&(b.pullDownEl.style.webkitTransitionDuration='0.5s',b.pullDownEl.style.transitionDuration='0.5s',b.pullDownEl.style.height=0)},resetload:function(a){var b=this;b.noMore=a,a?b.pullUpEl.className='pullUp hidden':function(){b.pullUpEl.className='pullUp',b.pullUpLabel.innerHTML=lableUp.initial}()}};