function Swipe(a,b){'use strict';function c(){r=q.children,u=r.length,2>r.length&&(b.continuous=false),p.transitions&&b.continuous&&3>r.length&&(q.appendChild(r[0].cloneNode(true)),q.appendChild(q.children[1].cloneNode(true)),r=q.children),s=Array(r.length),t=a.getBoundingClientRect().width||a.offsetWidth,q.style.width=r.length*t+'px';for(var E,D=r.length;D--;)E=r[D],E.style.width=t+'px',E.setAttribute('data-index',D),p.transitions&&(E.style.left=D*-t+'px',h(D,v>D?-t:v<D?t:0,0));b.continuous&&p.transitions&&(h(f(v-1),-t,0),h(f(v+1),t,0)),p.transitions||(q.style.left=v*-t+'px'),a.style.visibility='visible'}function d(){b.continuous?g(v-1):v&&g(v-1)}function e(){b.continuous?g(v+1):v<r.length-1&&g(v+1)}function f(D){return(r.length+D%r.length)%r.length}function g(D,E){if(v!=D){if(p.transitions){var F=Math.abs(v-D)/(v-D);if(b.continuous){var G=F;F=-s[f(D)]/t,F!=G&&(D=-F*r.length+D)}for(var H=Math.abs(v-D)-1;H--;)h(f((D>v?D:v)-H-1),t*F,0);D=f(D),h(v,t*F,E||w),h(D,0,E||w),b.continuous&&h(f(D-F),-(t*F),0)}else D=f(D),k(v*-t,D*-t,E||w);v=D,o(b.callback&&b.callback(v,r[v]))}}function h(D,E,F){j(D,E,F),s[D]=E}function j(D,E,F){var G=r[D],H=G&&G.style;H&&(H.webkitTransitionDuration=H.MozTransitionDuration=H.msTransitionDuration=H.OTransitionDuration=H.transitionDuration=F+'ms',H.webkitTransform='translate('+E+'px,0)translateZ(0)',H.msTransform=H.MozTransform=H.OTransform='translateX('+E+'px)')}function k(D,E,F){if(!F)return void(q.style.left=E+'px');var G=+new Date,H=setInterval(function(){var I=+new Date-G;return I>F?(q.style.left=E+'px',x&&l(),b.transitionEnd&&b.transitionEnd.call(event,v,r[v]),void clearInterval(H)):void(q.style.left=(E-D)*(Math.floor(100*(I/F))/100)+D+'px')},4)}function l(){y=setTimeout(e,x)}function m(){x=0,clearTimeout(y)}var n=function(){},o=function(D){setTimeout(D||n,0)},p={touch:'ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(D){var E=['transitionProperty','WebkitTransition','MozTransition','OTransition','msTransition'];for(var F in E)if(void 0!==D.style[E[F]])return true;return false}(document.createElement('swipe'))};if(a){var r,s,t,u,q=a.children[0];b=b||{};var v=parseInt(b.startSlide,10)||0,w=b.speed||300;b.continuous=void 0===b.continuous||b.continuous;var y,B,x=b.auto||0,z={},A={},C={handleEvent:function(D){switch(D.type){case'touchstart':this.start(D);break;case'touchmove':this.move(D);break;case'touchend':o(this.end(D));break;case'webkitTransitionEnd':case'msTransitionEnd':case'oTransitionEnd':case'otransitionend':case'transitionend':o(this.transitionEnd(D));}b.stopPropagation&&D.stopPropagation()},start:function(D){var E=D.touches[0];z={x:E.pageX,y:E.pageY,time:+new Date},B=void 0,A={},q.addEventListener('touchmove',this,false),q.addEventListener('touchend',this,false)},move:function(D){if(!(1<D.touches.length||D.scale&&1!==D.scale)){b.disableScroll&&D.preventDefault();var E=D.touches[0];A={x:E.pageX-z.x,y:E.pageY-z.y},'undefined'==typeof B&&(B=!!(B||Math.abs(A.x)<Math.abs(A.y))),B||(D.preventDefault(),m(),b.continuous?(j(f(v-1),A.x+s[f(v-1)],0),j(v,A.x+s[v],0),j(f(v+1),A.x+s[f(v+1)],0)):(A.x/=!v&&0<A.x||v==r.length-1&&0>A.x?Math.abs(A.x)/t+1:1,j(v-1,A.x+s[v-1],0),j(v,A.x+s[v],0),j(v+1,A.x+s[v+1],0)))}},end:function(){var E=+new Date-z.time,F=250>+E&&20<Math.abs(A.x)||Math.abs(A.x)>t/2,G=!v&&0<A.x||v==r.length-1&&0>A.x;b.continuous&&(G=false);var H=0>A.x;B||(F&&!G?(H?(b.continuous?(h(f(v-1),-t,0),h(f(v+2),t,0)):h(v-1,-t,0),h(v,s[v]-t,w),h(f(v+1),s[f(v+1)]-t,w),v=f(v+1)):(b.continuous?(h(f(v+1),t,0),h(f(v-2),-t,0)):h(v+1,t,0),h(v,s[v]+t,w),h(f(v-1),s[f(v-1)]+t,w),v=f(v-1)),b.callback&&b.callback(v,r[v])):b.continuous?(h(f(v-1),-t,w),h(v,0,w),h(f(v+1),t,w)):(h(v-1,-t,w),h(v,0,w),h(v+1,t,w))),q.removeEventListener('touchmove',C,false),q.removeEventListener('touchend',C,false)},transitionEnd:function(D){parseInt(D.target.getAttribute('data-index'),10)==v&&(x&&l(),b.transitionEnd&&b.transitionEnd.call(D,v,r[v]))}};return c(),x&&l(),p.touch&&q.addEventListener('touchstart',C,false),p.transitions&&(q.addEventListener('webkitTransitionEnd',C,false),q.addEventListener('msTransitionEnd',C,false),q.addEventListener('oTransitionEnd',C,false),q.addEventListener('otransitionend',C,false),q.addEventListener('transitionend',C,false)),{setup:function(){c()},slide:function(D,E){m(),g(D,E)},prev:function(){m(),d()},next:function(){m(),e()},stop:function(){m()},getPos:function(){return v},getNumSlides:function(){return u},kill:function(){m(),q.style.width='',q.style.left='';for(var E,D=r.length;D--;)E=r[D],E.style.width='',E.style.left='',p.transitions&&j(D,0,0);q.removeEventListener('touchstart',C,false),q.removeEventListener('webkitTransitionEnd',C,false),q.removeEventListener('msTransitionEnd',C,false),q.removeEventListener('oTransitionEnd',C,false),q.removeEventListener('otransitionend',C,false),q.removeEventListener('transitionend',C,false)}}}}(window.jQuery||window.Zepto)&&function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data('Swipe',new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);